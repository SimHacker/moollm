# Robust-First Skill Prototype
# Survive first, be correct later — Dave Ackley's principle

skill: robust-first
description: "Prioritize survivability over correctness"
origin: "Dave Ackley — Movable Feast Machine, robust-first computing"

# Core principles
principles:
  never_crash:
    description: "Always keep running, even with errors"
    implementation: |
      - Catch all exceptions at boundaries
      - Use defaults for missing data
      - Log errors but continue processing
      
  local_repair:
    description: "Fix what you can, where you are"
    implementation: |
      - Don't wait for global consistency
      - Repair inconsistencies when found
      - Log repairs for audit
      
  graceful_degradation:
    description: "Do less but keep working"
    implementation: |
      - Define capability tiers
      - Drop to lower tier under stress
      - Restore when resources available
      
  redundancy:
    description: "Important state exists in multiple places"
    implementation: |
      - Character location in character.yml AND room's occupants
      - Events in log AND state files
      - Recover from any surviving copy

# Error handling
error_handling:
  on_parse_error:
    - attempt_recovery
    - use_last_known_good
    - merge_from_log
    - flag_for_review
    - continue_with_partial
    
  on_missing_file:
    - check_archive
    - reconstruct_from_references
    - create_minimal_placeholder
    - log_recovery
    
  on_inconsistency:
    - identify_conflict
    - choose_authoritative_source
    - repair_other_copies
    - log_reconciliation

# Repair demon
repair_demon:
  schedule: "Background, continuous"
  checks:
    - location_consistency
    - reference_validity
    - schema_compliance
    - temporal_ordering
  actions:
    - repair_if_possible
    - log_repair
    - escalate_if_not

# Anti-fragility
anti_fragility:
  capture_lessons:
    - what_went_wrong
    - how_it_was_fixed
    - what_to_check_next_time
  evolve:
    - add_new_checks_from_lessons
    - strengthen_weak_points
    - share_wisdom

# Archive policy
archive_policy:
  never_delete: true
  archive_location: ".archive/"
  categories:
    corrupted: "Files that couldn't be parsed"
    versions: "Previous states before changes"
    failed: "Attempted operations that didn't work"
