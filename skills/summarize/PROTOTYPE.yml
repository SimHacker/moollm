# SUMMARIZE Skill Prototype
# Context compression and management

skill:
  name: "summarize"
  tier: 1  # File-only
  protocol: "SUMMARIZE"
  
  description: |
    Compress files and knowledge while preserving essential meaning.
    Manage context window through intelligent summarization.
    
  motto: "Compress without losing meaning."

inputs:
  source:
    type: path
    required: true
    description: "File or directory to summarize"
    
  level:
    type: enum
    values: ["WORKING", "REFERENCE", "POINTER"]
    default: "WORKING"
    description: "Compression level"

outputs:
  index: "SUMMARIES.yml"
  summaries_dir: "summaries/"

levels:
  FULL:
    compression_ratio: "1:1"
    description: "No compression, full content"
    use_when: "Active work, needs all detail"
    
  WORKING:
    compression_ratio: "~3:1"
    description: "Key points and structure preserved"
    use_when: "Recent context, may need details"
    preserves:
      - "Section headers"
      - "Key decisions"
      - "Important code snippets"
      - "Conclusions"
      
  REFERENCE:
    compression_ratio: "~10:1"
    description: "Essence only"
    use_when: "Background knowledge"
    preserves:
      - "Core purpose"
      - "Main conclusions"
      - "Retrieval hints"
      
  POINTER:
    compression_ratio: "~50:1"
    description: "Just enough to know it exists"
    use_when: "Rarely needed, but should remember"
    preserves:
      - "File exists"
      - "What it's about (one line)"
      - "When to retrieve"

summary_structure:
  required:
    - source_file
    - summarized_at
    - compression_level
    - essence
    
  optional:
    - key_points
    - decisions
    - retrieval_hints
    - related_files

commands:
  SUMMARIZE:
    syntax: "SUMMARIZE [file] [level]"
    action: "Create summary at specified level"
    
  COMPRESS:
    syntax: "COMPRESS [directory]"
    action: "Bulk summarize directory contents"
    
  EXPAND:
    syntax: "EXPAND [summary]"
    action: "Request full file in context"
    
  GC:
    syntax: "GC"
    action: "Remove stale summaries"

working_set:
  always_include:
    - "SUMMARIES.yml"

integrates_with:
  - protocol: "HOT-COLD"
    how: "Summaries inform cold.yml, pointers inform hot.yml"
    
  - protocol: "HONEST-FORGET"
    how: "WISDOM summaries compress iterations into lessons"
    
  - skill: "memory-palace"
    how: "Summaries become room descriptions"
