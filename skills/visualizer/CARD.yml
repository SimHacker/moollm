# CARD.yml â€” Visualizer
#
# Context-driven visual generation.
# "Compose context, synthesize prompts, render images."

card:
  id: visualizer
  name: "Visualizer"
  type: [skill, images, creative, automation]
  emoji: ğŸ¨
  rarity: uncommon
  
  description: |
    Full-stack visual generation: assemble context from YAML files,
    synthesize perfect prompts via LLM, render through image APIs.
    
    Currently: AI image generation (OpenAI, Google, Stability, Replicate)
    Future: Video, SVG, D3 charts, graphs, diagrams

# ENVIRONMENT VARIABLES

environment:
  # Image Generation
  OPENAI_API_KEY:
    enables: [openai_images, openai_llm]
    models_images: [gpt-image-1, dall-e-3]
    models_llm: [gpt-4o, gpt-4o-mini]
    
  GOOGLE_API_KEY:
    enables: [google_images, google_llm]
    models_images: [imagen-4, imagen-4-fast, imagen-3]
    models_llm: [gemini-2.0-flash, gemini-1.5-pro]
    
  STABILITY_API_KEY:
    enables: [stability_images]
    models: [sd3.5-large, sd3.5-turbo, sdxl]
    
  REPLICATE_API_TOKEN:
    enables: [replicate_images]
    models: [flux-1.1-pro, flux-pro, flux-schnell]
    
  # LLM Only (for prompt synthesis)
  ANTHROPIC_API_KEY:
    enables: [anthropic_llm]
    models: [claude-3.5-sonnet, claude-3-opus]
    note: "Prompt synthesis only (no image generation)"

# TOOLS

tools:
  required: [read_file, write_file]
  optional: [run_terminal_cmd]

tier: 2  # May execute scripts

# SISTER SCRIPT

script:
  name: visualize.py
  path: skills/visualizer/visualize.py
  
  commands:
    generate:
      description: "Compose context and generate image"
      usage: "visualize.py FILE1 [FILE2 ...] --provider PROVIDER"
      examples:
        - "visualize.py character.yml room.yml -p openai"
        - "cat mood.yml | visualize.py player.yml - -p google"
        - "echo 'mood: triumphant' | visualize.py *.yml - -p openai"
        
    compose:
      description: "Just synthesize prompt (no generation)"
      usage: "visualize.py compose FILE1 [FILE2 ...]"
      examples:
        - "visualize.py compose character.yml room.yml"
        - "visualize.py compose *.yml --style 'Avedon, Caravaggio'"
        
    providers:
      description: "List available providers"
      usage: "visualize.py providers"
      
    slideshow:
      description: "Create/update SLIDESHOW.md gallery (see slideshow skill)"
      delegates_to: skills/slideshow
      usage: "visualize.py slideshow [DIRECTORY]"
      note: "Convenience wrapper â€” full functionality in slideshow skill"
      
    stereo:
      description: "Semantic Stereo Vision â€” triangulate from PHOTO.yml + PHOTO.md"
      usage: "visualize.py stereo PHOTO.yml PHOTO.md"
      examples:
        - "visualize.py stereo PHOTO.yml PHOTO.md -p openai"
        - "visualize.py stereo ./slideshow/scene/ -p google"  # auto-finds files
      philosophy: |
        LEFT EYE (PHOTO.yml): Structure, pointers, references, YAML Jazz
        RIGHT EYE (PHOTO.md): Narrative, atmosphere, emotion, prose
        TRIANGULATION: Pass BOTH to renderer for depth perception
      
  options:
    --provider: "Image generation provider"
    --llm: "LLM for prompt synthesis"
    --style: "Artistic style/tradition to emphasize"
    --prompt-only: "Output prompt without generating"
    --raw-prompt: "Skip LLM synthesis, use literal prompt"
    
  composability: |
    Accepts any number of files + "-" for stdin.
    Unix-composable: pipe dynamic content into static context.

# METHODS

methods:
  VISUALIZE:
    description: "Generate image from context"
    parameters:
      context: "YAML files, room, character, metadata"
      provider: "openai | google | stability | replicate"
      style: "Artistic style/tradition"
    output: file (image + sidecar)
    invoked_by: [player, script]
    
  COMPOSE:
    description: "Synthesize prompt from context (no generation)"
    parameters:
      context: "YAML files to merge"
      style: "Style emphasis"
    output: text (prompt)
    invoked_by: [player]
    
  PHOTO-SET-8:
    description: "Create 8-image portfolio"
    parameters:
      subject: "What to photograph"
      types: "Two complementary categories"
    output: files (8 prompts + 8 images)
    invoked_by: [player]
    protocol: PHOTO-SET-8
    
  SLIDESHOW:
    description: "Create/update SLIDESHOW.md gallery (delegates to slideshow skill)"
    delegates_to: skills/slideshow
    parameters:
      directory: "Target directory (default: current)"
    output: file (SLIDESHOW.md)
    note: "Full slideshow functionality is in the slideshow skill"
    
  STEREO:
    description: "Semantic Stereo Vision â€” triangulated image generation"
    parameters:
      photo_yml: "PHOTO.yml (left eye â€” structure, pointers, references)"
      photo_md: "PHOTO.md (right eye â€” narrative, atmosphere, emotion)"
    output: file (image + combined prompt)
    invoked_by: [player, script]
    philosophy: |
      Like binocular vision creates depth through parallax,
      passing BOTH structure (YAML) AND narrative (MD) to the
      renderer triangulates on visual truth.
      
      Precision + Poetry = Depth
      
  BUG-EYED:
    description: "Bug-Eyed Hallucination Vision â€” speculative mining + stereo"
    parameters:
      photo_yml: "PHOTO.yml (left eye â€” structure)"
      photo_md: "PHOTO.md (right eye â€” narrative)"
      mining_files: "MINING-*.yml/md (third+ eyes â€” speculative mining!)"
    output: file (image with world-building context)
    invoked_by: [player, script]
    philosophy: |
      Mine the image BEFORE it exists!
      Speculative mining adds WORLD to the image:
      - Neighbor reactions â†’ atmosphere
      - Passerby perspectives â†’ human scale
      - Satellite view â†’ cosmic context
      - Economic data â†’ grounding
      
      Two eyes = depth
      Three+ eyes = MEANING
      Bug-eyed = HALLUCINATION DEPTH

# STATE

state:
  visual:
    prompt: { type: string }
    style: { type: string }
    traditions: { type: array }
    metadata: { type: object }
  last_generation:
    provider: { type: string }
    model: { type: string }
    output_path: { type: path }

# SPECIALIZATIONS

specializations:
  - photographer
  - painter
  - illustrator
  - concept-artist
  - video-director     # Future
  - chart-designer     # Future

# ROADMAP

roadmap:
  current:
    - AI image generation (OpenAI, Google, Stability, Replicate)
    - LLM prompt synthesis (OpenAI, Google, Anthropic)
    - Context assembly from YAML files
    - Metadata sidecars (YAML Jazz)
    - Photo-set-8 portfolios
    - SLIDESHOW.md galleries (death-scrollable, add/remove/rearrange)
    
  planned:
    - AI video generation (Runway, Pika, etc.)
    - SVG generation
    - D3 charts and graphs
    - Mermaid diagrams
    - Image editing/inpainting
    - Style transfer

# ADVERTISEMENTS

advertisements:
  GENERATE-IMAGE:
    score: 95
    condition: "Need to render image from context"
  SYNTHESIZE-PROMPT:
    score: 90
    condition: "Have context, need perfect prompt"
  PHOTO-SET:
    score: 88
    condition: "Need comprehensive visual coverage"
  SLIDESHOW:
    score: 85
    delegates_to: skills/slideshow
    condition: "Directory has images, need gallery for GitHub"
    note: "Visualizer advertises, slideshow skill implements"
  SEMANTIC-STEREO:
    score: 92
    condition: "Have PHOTO.yml AND PHOTO.md, want triangulated image with depth"
    note: "Two-eye vision: structure + narrative = depth perception"
  BUG-EYED-HALLUCINATION:
    score: 95
    condition: "Have PHOTO.yml, PHOTO.md, AND MINING-*.yml, want maximum context"
    note: "Three+ eye vision: structure + narrative + speculative mining = MEANING"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# MODULAR PLUG-INS â€” Visual styles, presets, profiles
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# All visual presets live here. Slideshow PRESENTS, Visualizer CREATES.
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

modular:

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # STYLES â€” Artist/tradition style guides (original)
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  
  styles:
    dir: "./styles/"
    index: "./styles/INDEX.yml"
    description: "Artist and tradition style guides"
    files:
      - jennell-jaquays.yml   # Fantasy illustration legend
    planned:
      - larry-elmore.yml
      - frank-frazetta.yml
      - dutch-golden-age.yml
      - baroque.yml

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # PHOTOGRAPHERS â€” Famous photographer styles
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  
  photographers:
    dir: "./photographers/"
    index: "./photographers/INDEX.yml"
    description: "Famous photographers with identifiable styles"
    files:
      - crewdson.yml      # Staged suburban surrealism
      - brassai.yml       # Paris by night
      - leiter.yml        # Color through glass
      - eggleston.yml     # Democratic color
    planned:
      - avedon.yml        # Stark psychological portraits
      - leibovitz.yml     # Conceptual celebrity
      - frank.yml         # The Americans
      - arbus.yml         # Freaks and normals
      - adams.yml         # Ansel Adams zones
      - shore.yml         # New topographics
    usage: |
      "in the style of Gregory Crewdson"
      TAKE PHOTO AS crewdson OF scene

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # DEVICES â€” Camera/phone/sensor descriptions
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  
  devices:
    dir: "./devices/"
    index: "./devices/INDEX.yml"
    description: "Cameras, phones, satellites â€” describe device, visualizer improvises"
    philosophy: |
      Don't enumerate device types â€” DESCRIBE the device.
      Visualizer reads description and improvises visual effects.
      
      "A cheap plastic disposable camera from 1998"
        â†’ washed out colors, light leaks, soft focus
        
      "Ada II's repurposed targeting system"
        â†’ geometric overlays, involuntary crosshairs
    categories:
      - professional      # Large format, medium format, DSLR
      - vintage           # Rangefinder, TLR, Polaroid
      - phones            # iPhone, Nokia N95, flip phone
      - specialized       # Security, satellite, trail cam
      - experimental      # Pinhole, daguerreotype, Holga

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # FILM â€” Film stock simulations
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  
  film:
    dir: "./film/"
    index: "./film/INDEX.yml"
    description: "Film stock simulations for color science, grain, character"
    categories:
      color_negative:
        - portra_400      # Portrait standard
        - ektar_100       # Punchy landscapes
        - gold_200        # Consumer nostalgia
        - superia_400     # 90s aesthetic
      color_slide:
        - velvia_50       # Landscape saturation
        - provia_100f     # Neutral accurate
        - ektachrome_e100 # Cool clean
      black_and_white:
        - tri_x_400       # Documentary standard
        - hp5_plus        # Flexible all-purpose
        - delta_3200      # Gritty low light
      cinema:
        - cinestill_800t  # Tungsten halation
        - cinestill_50d   # Daylight cinema
      instant:
        - polaroid_sx70   # Color shifts
        - instax          # Modern instant

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # PROFILES â€” Character photography POVs
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  
  profiles:
    dir: "./profiles/"
    index: "./profiles/INDEX.yml"
    description: "Character photography profiles for TAKE PHOTO AS"
    command: "TAKE PHOTO AS <character> [OF <subject>]"
    available:
      - don           # Chaos finder, stream of consciousness
      - ada-ii        # Geometric patterns, involuntary targeting
      - tourist       # Phone camera, hashtags
      - surveillance  # Flat affect, coordinates
      - seymour       # Teaching moments, constructionist
      - noir          # Shadows, suspicion
    party_mode: |
      Multiple characters photograph same scene.
      Each reveals what THEY noticed.
      
      > PARTY PHOTO OF no-ai-tower
      [don] "HOLY SHIT the sign is bigger than the building!"
      [ada-ii] "Interesting geometryâ€” TARGETâ€” no. Sorry."
      â†’ 4 photos, 4 perspectives, 4 truths.

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# USAGE PATTERNS
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

usage_patterns:
  style_guide: |
    Include a style guide as additional context:
      visualize.py your-scene.yml styles/jennell-jaquays.yml
    
  photographer_style: |
    Apply photographer's signature look:
      visualize.py scene.yml photographers/crewdson.yml
      TAKE PHOTO AS crewdson OF scene
      
  film_simulation: |
    Apply film stock color science:
      visualize.py scene.yml --film portra_400
      
  device_flavor: |
    Describe device, visualizer improvises:
      equipment:
        description: "Holga 120, plastic toy camera with light leaks"
        
  character_pov: |
    Filter through character's perspective:
      TAKE PHOTO AS don OF no-ai-tower
      PARTY PHOTO OF scene

# RELATED

see-also:
  - skills/slideshow         # Present images as narratives (we create, they present)
  - skills/image-mining      # Extract resources FROM images
  - skills/storytelling-tools
  - skills/mind-mirror       # Personality â†’ visual expression
  - skills/room              # Environment context
  - skills/character         # Character context
