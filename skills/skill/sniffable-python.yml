# sniffable-python
# Layout convention for Python scripts in MOOLLM skills.

id: sniffable-python
name: Sniffable Python
type: convention

definition: |
  Structure Python scripts so the first 50-100 lines completely
  describe the API. An LLM reads the head to understand the
  entire script without reading the rest.

rules:
  - Docstring at top of file: all commands, arguments, gotchas, reference syntax
  - Use argparse with add_subparsers — the entire CLI definition lives in main()
    as one contiguous block. Every command, every argument, every help string,
    all in one place. Not click/typer/fire which use decorators that scatter
    argument definitions across functions throughout the file. An LLM can't
    sniff a click app without reading every decorated function.
  - Constants and path definitions immediately after imports
  - main() is the CLI definition, set_defaults(func=cmd_xxx) routes to handlers
  - The rest of the file is handler implementations — underground, only dig when needed

rationale: |
  Same principle as the Semantic Image Pyramid applied within a single file.
  GLANCE→CARD→SKILL→README is progressive disclosure across files.
  Sniffable-python is progressive disclosure within a file.
  The head sticks above ground. The body is below.

canonical_example:
  file: skills/cursor-mirror/scripts/cursor_mirror.py
  total_lines: ~9800
  structure:
    lines_1_to_160: docstring — all 59 commands, reference syntax, gotchas, data locations
    line_162: import argparse
    lines_166_to_178: path constants and database schema comments
    lines_183_to_260: main() with argparse subparsers — every command defined in one block
    lines_260_plus: handler implementations (underground)
  note: |
    An LLM reads lines 1-260 and knows the complete interface.
    The other 9,500 lines are implementation details.

see_also:
  - sister-script.yml
  - skills/cursor-mirror/scripts/cursor_mirror.py
