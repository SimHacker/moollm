# Card Interaction System
# Every card has a pie menu! Explore, learn, discover.
# Cards REMEMBER. The deck tells stories.
#
# "Tell me more about this..."

card_interaction:
  name: "Card Pie Menu System"
  emoji: "ğŸ¥§ğŸƒ"
  
  philosophy: |
    Every card is a PORTAL, not just a game piece.
    
    Click on any card â†’ pie menu appears with options to:
    - Learn more about what the card represents
    - See its connections to other cards
    - Explore its k-line relationships
    - Generate/view its artwork
    - Hear its story
    - Understand its strategy
    
    The game becomes an interactive encyclopedia.
    Play is learning. Learning is play.
    
    AND CARDS REMEMBER.
    
    Each time you play, the deck accumulates history.
    Who drew this card? Who played it? What happened?
    Each card points to the next card dealt in that game.
    Follow the thread and you can trace the entire narrative.
    
    The deck is a storyteller.
    Each shuffle is a new chapter.
    Each card carries the weight of all games before.

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# THE PIE MENU
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

pie_menu:
  
  # Core slices (always present)
  universal_slices:
    
    tell_me_more:
      label: "Tell me more..."
      emoji: "ğŸ’¬"
      position: "N"  # North (top)
      action: "expand_card_knowledge"
      description: |
        The LLM explains the card in depth:
        - What it represents
        - Why it's in the game
        - Cultural/historical context
        - How it connects to MOOLLM themes
        - Interesting facts
      prompt_template: |
        Tell me more about the {card_type} card "{card_name}".
        
        Context:
        - Flavor text: {flavor}
        - Category: {category}
        - From: {source_plugin}
        
        Explain:
        1. What this card represents in the real world
        2. Why it's meaningful in MOOLLM context
        3. Any cultural, historical, or philosophical connections
        4. K-line relationships to other concepts
        5. Something surprising or delightful about it
        
    view_artwork:
      label: "View artwork"
      emoji: "ğŸ–¼ï¸"
      position: "NE"
      action: "display_or_generate_image"
      description: |
        Shows the card's artwork.
        If not yet generated, creates it from image_prompt.
      prompt_template: |
        Generate card artwork:
        {image_prompt}
        
        Style: Fluxx card art â€” bold, iconic, playful
        
    k_line_map:
      label: "K-Line connections"
      emoji: "ğŸ”—"
      position: "E"
      action: "show_connections"
      description: |
        Shows how this card connects to other concepts:
        - Other cards it synergizes with
        - Goals it contributes to
        - Rules that affect it
        - Thematic clusters
      output_format: |
        K-Line Map for "{card_name}"
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        SYNERGIZES WITH:
        - {related_keeper_1}: {why}
        - {related_keeper_2}: {why}
        
        FEATURED IN GOALS:
        - {goal_1}: requires this + {other}
        - {goal_2}: requires this + {other}
        
        AFFECTED BY RULES:
        - {rule_1}: {effect}
        
        THEMATIC CLUSTER: {cluster_name}
        Related concepts: {concept_list}
        
    strategy_tips:
      label: "Strategy tips"
      emoji: "ğŸ¯"
      position: "SE"
      action: "explain_strategy"
      description: |
        How to use this card effectively:
        - When to play it
        - What to combine it with
        - Common mistakes
        - Advanced tactics
      prompt_template: |
        Give strategy tips for the {card_type} "{card_name}":
        
        Effect: {text}
        
        Explain:
        1. When is the best time to play this?
        2. What cards does it combo with?
        3. What's a common mistake with this card?
        4. Any advanced tactics?
        5. How does this card change in different player counts?
        
    card_story:
      label: "Card story"
      emoji: "ğŸ“–"
      position: "S"
      action: "narrate_story"
      description: |
        A short narrative about this card.
        Origin story, a moment it created, or its perspective.
        
        NOW WITH MEMORY: If this card has play_history,
        the story can draw from REAL events it participated in!
      prompt_template: |
        Tell a short story (2-3 paragraphs) about "{card_name}".
        
        You could tell:
        - Its origin story (how it came to be a card)
        - A memorable moment it created in a game
        - The card's own perspective (if it were sentient)
        - A legend about this card among players
        
        Flavor: {flavor}
        
        IF play_history exists, PREFER real events:
        {play_history_summary}
        
        Ground the story in what ACTUALLY happened.
        "Remember when Palm drew me on hand 7..."
        
    who_likes_this:
      label: "Who likes this card?"
      emoji: "â¤ï¸"
      position: "SW"
      action: "character_preferences"
      description: |
        Which MOOLLM characters love or hate this card?
        Based on their personalities and tells.
      prompt_template: |
        Which MOOLLM characters would love or hate "{card_name}"?
        
        Consider:
        - Don Hopkins (philosopher, cheese lover)
        - Palm (wise, observant, patient)
        - Bumblewick (anxious, learning, growing)
        - Donna (aggressive, protective, political)
        - Klaus Nomi (silent, otherworldly)
        - Peewee (chaotic, delighted by everything)
        - Andy Looney (meta-aware, game designer)
        
        For each relevant character, explain WHY they'd feel that way.
        
    mine_this_card:
      label: "Mine for meaning"
      emoji: "â›ï¸"
      position: "W"
      action: "semantic_mining"
      description: |
        Deep semantic mining of the card concept:
        - Abstract resources
        - Emotional resonances
        - Philosophical depths
        - Hidden connections
      prompt_template: |
        Mine the card "{card_name}" for semantic treasures.
        
        Extract:
        - Abstract concepts it embodies
        - Emotions it evokes
        - Philosophical questions it raises
        - Metaphorical meanings
        - What it says about MOOLLM's worldview
        
    related_cards:
      label: "Related cards"
      emoji: "ğŸƒğŸƒ"
      position: "NW"
      action: "show_related"
      description: |
        Other cards that relate to this one:
        - Same category
        - Same plugin
        - Synergistic goals
        - Thematic siblings

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# CARD-TYPE SPECIFIC SLICES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

type_specific_slices:

  keeper:
    extra_slices:
      - label: "Goals I complete"
        emoji: "ğŸ†"
        action: "list_goals_for_keeper"
        
      - label: "My special ability"
        emoji: "âœ¨"
        action: "explain_ability"
        condition: "has_special_ability"
        
  goal:
    extra_slices:
      - label: "How to achieve this"
        emoji: "ğŸ“‹"
        action: "explain_goal_path"
        
      - label: "Probability estimate"
        emoji: "ğŸ“Š"
        action: "calculate_goal_probability"
        
  action:
    extra_slices:
      - label: "Timing advice"
        emoji: "â°"
        action: "explain_timing"
        
      - label: "Combo potential"
        emoji: "ğŸ’¥"
        action: "list_combos"
        
  new_rule:
    extra_slices:
      - label: "Rule interactions"
        emoji: "âš™ï¸"
        action: "explain_rule_interactions"
        
      - label: "Stack position"
        emoji: "ğŸ“š"
        action: "explain_stacking"
        
  creeper:
    extra_slices:
      - label: "How to get rid of this"
        emoji: "ğŸš«"
        action: "explain_removal"
        
      - label: "Goals that need me"
        emoji: "ğŸ’€ğŸ†"
        action: "list_creeper_goals"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# CONTEXT-AWARE SLICES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

context_slices:

  in_hand:
    - label: "Should I play this now?"
      emoji: "ğŸ¤”"
      action: "evaluate_play_timing"
      prompt_template: |
        Given the current game state:
        - Current goal: {current_goal}
        - My keepers: {my_keepers}
        - Rules in play: {rules}
        - Other players' keepers: {visible_keepers}
        
        Should I play "{card_name}" now? Explain pros and cons.
        
  in_play:
    - label: "What's this doing for me?"
      emoji: "ğŸ“ˆ"
      action: "evaluate_card_value"
      
  in_discard:
    - label: "Can I get this back?"
      emoji: "ğŸ”„"
      action: "list_retrieval_options"
      
  in_deck:
    - label: "What are my odds?"
      emoji: "ğŸ²"
      action: "calculate_draw_probability"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# MOOLLM-SPECIFIC SLICES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

moollm_slices:

  character_cards:
    - label: "Full character profile"
      emoji: "ğŸ‘¤"
      action: "show_character_yaml"
      
    - label: "Their tells"
      emoji: "ğŸ­"
      action: "list_character_tells"
      
    - label: "Relationships"
      emoji: "ğŸ’•"
      action: "show_relationships"
      
  tech_cards:
    - label: "Real-world explanation"
      emoji: "ğŸ”¬"
      action: "explain_tech_concept"
      prompt_template: |
        Explain the real-world concept behind "{card_name}":
        
        1. What is {concept} in AI/tech?
        2. Why is it important?
        3. How does MOOLLM use it?
        4. Accessible analogy for non-technical people
        
    - label: "MOOLLM k-line"
      emoji: "ğŸ”—"
      action: "show_kline_definition"
      
  philosophy_cards:
    - label: "Deep dive"
      emoji: "ğŸ¤¿"
      action: "philosophical_exploration"
      prompt_template: |
        Take me deeper into the philosophy of "{card_name}":
        
        - What worldview does this represent?
        - What questions does it raise?
        - How does it connect to other MOOLLM concepts?
        - What would Marvin Minsky say about this?
        - What would Will Wright say about this?

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# INTERACTION EXAMPLES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

examples:

  yaml_jazz_card:
    card: "YAML Jazz"
    
    tell_me_more_response: |
      # YAML Jazz ğŸ·
      
      **What it represents:** YAML Jazz is Don Hopkins' philosophy that
      YAML comments aren't just documentation â€” they carry SEMANTIC WEIGHT.
      Structure provides the skeleton; comments provide the SOUL.
      
      **Why it's in MOOLLM:** This is a core k-line. Every YAML file in
      MOOLLM uses comments as a parallel data channel. The comment
      "# Watches other players' chip stacks obsessively" isn't just
      describing the field â€” it's CHARACTER DATA the LLM uses.
      
      **Cultural connection:** Like jazz musicians improvising over
      chord changes, YAML Jazz adds spontaneous meaning over rigid
      structure. The structure is the chart; the comments are the solo.
      
      **K-line relationships:**
      - Double-barrel meaning (data + documentation)
      - Sniffable interfaces (CARD.yml â†’ SKILL.md)
      - Play-Learn-Lift (informal â†’ captured â†’ shared)
      
      **Surprising fact:** The saxophone emoji ğŸ· was chosen because
      jazz improvisation IS structured freedom â€” exactly like semantic
      comments in strict YAML format.
      
    k_line_map_response: |
      K-Line Map for "YAML Jazz"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      
      SYNERGIZES WITH:
      - K-Line: Both are knowledge representation
      - Soul Document: Comments ARE the soul
      - Speed of Light: Efficient context assembly
      
      FEATURED IN GOALS:
      - Double-Barrel Meaning: YAML Jazz + K-Line
      - Society of Mind: YAML Jazz + Brain/LLM
      
      THEMATIC CLUSTER: Knowledge Representation
      Related: K-Line, Context Window, Prompt, Token
      
      PHILOSOPHICAL DEPTH: Medium-High
      This card embodies MOOLLM's approach to meaning.
      
  stroopwafel_card:
    card: "Stroopwafel"
    
    tell_me_more_response: |
      # Stroopwafel ğŸ§‡
      
      **What it represents:** A stroopwafel is a Dutch waffle cookie
      made from two thin layers of baked dough with caramel syrup
      in the middle. Traditionally, you place it on top of a hot
      cup of coffee to warm the caramel.
      
      **Why it's in MOOLLM:** The Amsterdam expansion captures Dutch
      culture, and stroopwafels are iconic. They also represent
      GEZELLIGHEID â€” that untranslatable Dutch coziness of sharing
      good things with good people.
      
      **Cultural connection:** Stroopwafels originated in Gouda in
      the late 18th century. A baker made them from leftover crumbs
      sweetened with syrup â€” waste became treasure.
      
      **K-line relationships:**
      - Cheese Wheel: Both Dutch food keepers
      - Gezelligheid rule: Sharing culture
      - Don Hopkins: Known Amsterdam visitor
      
      **Pro tip:** In real life, a stroopwafel must be EXACTLY the
      right size to cover a coffee cup. Too small and it falls in.
      Too large and it doesn't warm evenly. Precision matters.
      
    who_likes_this_response: |
      # Who Likes Stroopwafel?
      
      **Don Hopkins** â¤ï¸â¤ï¸â¤ï¸
      LOVES it. Reminds him of Amsterdam trips. Would absolutely
      share with everyone at the table. Probably brought some.
      
      **Palm** â¤ï¸
      Appreciates the craftsmanship. The patience of warming it
      on coffee appeals to his contemplative nature.
      
      **Bumblewick** â¤ï¸â¤ï¸
      The sweetness comforts his anxiety. Also, it's small enough
      for a bee to enjoy. Takes notes on caramel physics.
      
      **Donna** ğŸ¤·
      "It's FINE. I prefer POWER FOODS. But I won't say no."
      
      **Peewee** â¤ï¸â¤ï¸â¤ï¸
      "STROOPWAFEL! HA HA!" *bounces*
      
      **Klaus Nomi** ğŸ˜
      *stares at stroopwafel for 30 seconds*
      *takes one small bite*
      *nods almost imperceptibly*

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TECHNICAL INTEGRATION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

integration:

  trigger_methods:
    - "Click/tap on card"
    - "Long press on card"
    - "Right-click context menu"
    - "Voice command: 'Tell me about [card]'"
    - "Narrative prompt: 'What's that card?'"
    
  response_format:
    - markdown: "For text display"
    - yaml: "For structured data"
    - speech: "For voice narration"
    - image: "For artwork generation"
    
  caching:
    - "Cache 'tell me more' responses per card"
    - "Cache generated artwork"
    - "Context-dependent responses always fresh"
    
  llm_context:
    - "Current game state"
    - "Player asking (for personalization)"
    - "Previous queries (avoid repetition)"
    - "Character personality (if in-character)"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# PIE MENU VISUAL DESIGN
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

visual_design:

  layout:
    style: "radial"
    slices: 8
    center: "card thumbnail"
    
  positions:
    N:  "Tell me more"
    NE: "View artwork"
    E:  "K-Line connections"
    SE: "Strategy tips"
    S:  "Card story"
    SW: "Who likes this?"
    W:  "Mine for meaning"
    NW: "Related cards"
    
  animation:
    open: "expand from card center"
    close: "collapse to card"
    select: "slice highlights, expands"
    
  colors:
    keeper: "#4CAF50"    # Green
    goal: "#2196F3"      # Blue
    action: "#FF9800"    # Orange
    new_rule: "#9C27B0"  # Purple
    creeper: "#F44336"   # Red
    
  accessibility:
    - "Keyboard navigation (1-8 for slices)"
    - "Screen reader labels"
    - "High contrast mode"
    - "Text-only fallback"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# CARD MEMORY â€” The Deck Remembers
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

card_memory:

  philosophy: |
    Individual cards remember EVERYTHING.
    
    Each card accumulates a play_history â€” a list of every game
    it participated in, who drew it, who played it, what context
    surrounded it. And crucially: what card came NEXT in the deal.
    
    This creates THREADED LINKED LISTS through the deck.
    
    Pick up any card and say "tell me your story" â€” it can recount
    every hand it's been in. Follow the `next` pointers and you
    can reconstruct the entire narrative of any past game.
    
    The deck is not just cards. It's a LIBRARY of stories,
    indexed by which card you happen to pick up.
    
    "This card was drawn by Palm on hand 7. She held it for three
    turns before playing it to complete Gezellig Evening. The next
    card dealt was Cheese Wheel, drawn by Don, who immediately
    stole Palm's Bicycle with it..."

  memory_structure:
    description: "Each card definition accumulates play events"
    
    schema: |
      card:
        id: "amsterdam:stroopwafel"
        # ... normal card fields ...
        
        play_history:
          # Array of play events, newest first
          - game_id: "moollm-ultimate-001"
            deal_id: 47  # Position in deal sequence
            
            drawn_by: "palm"
            drawn_at: "hand_7"
            drawn_context:
              deck_remaining: 23
              goals_in_play: ["gezellig_evening"]
              
            played_by: "palm"
            played_at: "hand_10"
            played_context:
              action: "play_keeper"
              result: "completed_goal"
              goal_completed: "gezellig_evening"
              
            # THE THREAD â€” pointer to next card dealt
            next:
              card: "amsterdam:cheese_wheel"
              deal_id: 48
              
            # Optional narrative color
            narrative: "The stroopwafel was warm from sitting on Palm's coffee"
            memorable: true
            
          - game_id: "don-solo-session-23"
            deal_id: 12
            # ... previous game's history ...

  threading:
    description: "Linked list through deal order"
    
    structure: |
      Each play event has a `next` pointer:
      
      stroopwafel[game-001].next â†’ cheese_wheel[game-001]
      cheese_wheel[game-001].next â†’ deep_thoughts[game-001]
      deep_thoughts[game-001].next â†’ draw_2[game-001]
      ...
      
      Follow the chain and you reconstruct the game!
      
    traversal: |
      # To trace a game from any card:
      
      function trace_game(card, game_id):
        events = []
        current = card.find_event(game_id)
        
        while current:
          events.append(current)
          if current.next:
            next_card = lookup(current.next.card)
            current = next_card.find_event(game_id)
          else:
            current = null  # End of deck
            
        return events
        
    multiple_games: |
      The deck carries MANY threads â€” one per game played.
      
      stroopwafel.play_history:
        - game: "moollm-ultimate-001", next â†’ cheese_wheel
        - game: "don-solo-23", next â†’ bicycle
        - game: "palm-practice-7", next â†’ bread
        
      Each thread is independent. Same deck, different stories.

  deck_as_storyteller:
    description: "The deck narrates its own history"
    
    capabilities:
      - "Recount any game from start to finish"
      - "Highlight memorable moments"
      - "Identify recurring patterns (same cards drawn by same player)"
      - "Note streaks and coincidences"
      - "Remember legendary plays"
      
    narrative_example: |
      **You:** Tell me about this deck.
      
      **The Deck:**
      
      I have been shuffled 47 times. I have seen 312 hands played.
      
      My most dramatic game was moollm-ultimate-001. Palm drew the
      Stroopwafel on hand 7 â€” she held it while the Gezelligheid rule
      was in play, warming it on her coffee (she does that). Three turns
      later, Don played YAML Jazz â€” the card that started everything.
      
      My luckiest card is the Cheese Wheel. It has completed 12 goals
      in 47 games. Something about cheese.
      
      My most stolen card is Bicycle. Every game. Someone steals the
      Bicycle. Usually Don. He can't help himself.
      
      I remember when Bumblewick drew his first Creeper â€” Alignment
      Failure, hand 4, game 23. He made that little buzzing sound.
      Palm traded him Peace, and he calmed down.
      
      Every shuffle is a new story. I carry them all.

  memory_slices:
    description: "Additional pie menu slices for card memory"
    
    slices:
      my_history:
        label: "My history"
        emoji: "ğŸ“œ"
        position: "center_submenu"
        action: "show_card_history"
        description: |
          List all games this card participated in.
          Who drew it, who played it, what happened.
        prompt_template: |
          Show me the play history for "{card_name}":
          
          For each game, show:
          - Game ID and date
          - Who drew this card
          - Who played it
          - What resulted (goal completed? stolen? discarded?)
          - Any memorable context
          
          Show most recent first. Highlight memorable moments.
          
      trace_forward:
        label: "What came next?"
        emoji: "â¡ï¸"
        position: "center_submenu"
        action: "follow_thread"
        description: |
          Follow the deal thread forward from this card.
          "What card was dealt after me in game X?"
        prompt_template: |
          In game {game_id}, what happened after {card_name} was dealt?
          
          Follow the thread:
          - Next card dealt
          - Who drew it
          - What they did with it
          - Continue for 5 cards or until interesting event
          
      trace_backward:
        label: "What came before?"
        emoji: "â¬…ï¸"
        position: "center_submenu"
        action: "reverse_thread"
        description: |
          Trace backward through deal order.
          "What card was dealt before me?"
          (Requires reverse index)
          
      legendary_moments:
        label: "Legendary moments"
        emoji: "â­"
        position: "center_submenu"
        action: "show_memorable"
        description: |
          This card's most memorable plays across all games.
        prompt_template: |
          What are {card_name}'s most legendary moments?
          
          Look through play_history for events marked "memorable: true"
          or events with dramatic outcomes:
          - Goal completions
          - Crucial steals
          - Surprising draws at perfect moments
          - Dramatic reversals
          
          Tell each story briefly but vividly.
          
      game_reconstruction:
        label: "Reconstruct game..."
        emoji: "ğŸ¬"
        position: "center_submenu"
        action: "narrate_game"
        description: |
          Pick a game from this card's history and reconstruct
          the entire game narrative by following threads.
        prompt_template: |
          Reconstruct game {game_id} starting from {card_name}.
          
          Follow the deal thread through the entire game.
          Narrate what happened â€” who drew what, who played what,
          what rules changed, what goals came and went, who won.
          
          Make it a STORY, not a log. The deck remembers drama.

  memory_accumulation:
    description: "How history gets written"
    
    when_recorded:
      - "Card is dealt â†’ record draw event"
      - "Card is played â†’ update event with play info"
      - "Card causes effect â†’ note in context"
      - "Game ends â†’ close event, mark memorable moments"
      
    what_gets_recorded:
      always:
        - "game_id"
        - "deal_id (position in deal sequence)"
        - "drawn_by"
        - "drawn_at (which hand)"
        - "next pointer"
        
      on_play:
        - "played_by"
        - "played_at"
        - "action taken"
        - "immediate result"
        
      optional:
        - "narrative color (LLM-generated flavor)"
        - "memorable flag"
        - "player reactions"
        - "tells exhibited"
        
    storage: |
      History accumulates on the card DEFINITION.
      Not on instances â€” on the source.
      
      This means the amsterdam-expansion.yml file grows over time.
      Or: history is stored in a separate history.yml per deck.
      Or: in a database that the LLM can query.
      
      The point is: the card TYPE remembers, not just instances.
      When you pick up "Stroopwafel", you pick up ALL stroopwafel history.

  thread_visualization:
    description: "Visual representation of game threads"
    
    diagram: |
      Game moollm-ultimate-001 thread:
      
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Stroopwafel  â”‚ â”€â”€â–º â”‚ Cheese Wheel â”‚ â”€â”€â–º â”‚ Deep Thoughtsâ”‚ â”€â”€â–º
      â”‚ deal_id: 47  â”‚     â”‚ deal_id: 48  â”‚     â”‚ deal_id: 49  â”‚
      â”‚ drawn: Palm  â”‚     â”‚ drawn: Don   â”‚     â”‚ drawn: Bumbleâ”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Draw 2       â”‚ â”€â”€â–º â”‚ YAML Jazz    â”‚ â”€â”€â–º â”‚ Peace        â”‚ â”€â”€â–º
      â”‚ deal_id: 50  â”‚     â”‚ deal_id: 51  â”‚     â”‚ deal_id: 52  â”‚
      â”‚ drawn: Klaus â”‚     â”‚ drawn: Don   â”‚     â”‚ drawn: Palm  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      
      ... (continues through entire deck)
      
      Each box is a card. Each arrow is the "next" pointer.
      The chain tells the story.
      
    navigation: |
      UI could show this as:
      - Linear timeline (scroll through game)
      - Thread view (jump between cards)
      - Story mode (narrated walkthrough)
      - Highlights only (memorable moments)

  collective_memory:
    description: "Statistics and patterns across all games"
    
    deck_level_stats:
      - "Total games played: 47"
      - "Total hands dealt: 312"
      - "Most drawn card: Peace (89 times)"
      - "Least drawn card: Creeper War (3 times)"
      - "Most goals completed by: Cheese Wheel (12)"
      - "Most stolen: Bicycle (23 times)"
      - "Longest held without playing: YAML Jazz, 7 hands, game 23"
      
    pattern_detection:
      - "Palm always holds food keepers"
      - "Don goes for Cheese + Bread combo"
      - "Bumblewick attracts Creepers (17% vs expected 11%)"
      - "Klaus rarely plays Actions immediately"
      
    narratives_generated:
      - "The Legendary Cheese Heist (game 34)"
      - "Palm's Perfect Storm (game 41)"
      - "The Time Everyone Had Creepers (game 12)"
      
    prompt_template: |
      Analyze this deck's collective memory:
      
      Look for:
      - Recurring patterns (who draws what)
      - Unusual streaks or coincidences
      - Legendary moments worth naming
      - Player tendencies revealed by history
      - Cards that "want" to be together
      
      Make the deck feel like it has a PERSONALITY.

  example_story_handoff:
    description: "How cards hand off storytelling"
    
    scenario: |
      You ask Stroopwafel: "What happened in game 001?"
      
      **Stroopwafel:**
      "I was dealt on hand 7 to Palm. She was already holding
      Cheese Wheel and had Gezelligheid in play. I could feel
      where this was going..."
      
      **You:** "What happened next?"
      
      **Stroopwafel:**
      "Next dealt was Cheese Wheel â€” but wait, Palm already had
      that one. This was a DIFFERENT Cheese Wheel going to Don.
      He immediately looked at Palm's keepers. Here, let Cheese
      Wheel tell you what happened next..."
      
      **Cheese Wheel (Don's copy):**
      "Don drew me on hand 8. He saw Palm had the Bicycle and
      a Stroopwafel, and knew she was close to Gezellig Evening.
      So he played me to steal her Bicycle instead of keeping me.
      Brutal, but effective. Ask the Bicycle what happened next..."
      
      **Bicycle:**
      "I was stolen on hand 8. Moving from Palm to Don. She made
      that little sigh â€” she does that. But she drew Peace next,
      which let her play the Stroopwafel with confidence. The
      next card dealt was Peace, in fact. Let Peace tell you..."
      
      The story flows through the deck.
      Each card hands off to the next.
      The thread becomes narrative.
