# Bootstrap Probe Template
# Generated by PROBE or DEEP-PROBE methods
# This file is GITIGNORED — local machine info stays private

probe:
  # When this probe was run
  timestamp: "{{ISO 8601 timestamp}}"
  
  # Model information (from system prompt)
  model:
    name: "{{model name, e.g., claude-sonnet-4-20250514}}"
    provider: "{{anthropic | openai | local}}"
    context_window: "{{estimated context size}}"
    
  # Orchestrator/IDE detection
  orchestrator:
    name: "{{cursor | claude-code | custom | unknown}}"
    driver: "{{path to loaded driver, e.g., kernel/drivers/cursor.yml}}"
    tier: "{{1-6}}"
    hot_cold_mode: "{{magic | advisory | hybrid | documentation}}"
    
  # Workspace information
  workspace:
    path: "{{absolute path to workspace}}"
    name: "{{workspace/project name}}"
    date: "{{current date}}"
    
  # Available tools (categorized)
  tools:
    file_operations:
      # - read_file
      # - write
      # - search_replace
      # - list_dir
      # - delete_file
      []
      
    search:
      # - codebase_search (semantic)
      # - grep (text/regex)
      # - glob_file_search (by pattern)
      []
      
    execution:
      # - run_terminal_cmd
      []
      
    browser:
      # - mcp_cursor-ide-browser_browser_navigate
      # - mcp_cursor-ide-browser_browser_snapshot
      []
      
    mcp_servers:
      # - name: "server-name"
      #   tools: [tool1, tool2, ...]
      []
      
    other:
      # Any tools not in above categories
      []
      
  # Capability summary
  capabilities:
    can_read_files: false
    can_write_files: false
    can_search_semantically: false
    can_execute_terminal: false
    can_browse_web: false
    has_mcp: false
    
  # Visible repositories/projects
  repos:
    # - path: "."
    #   name: "moollm"
    #   has_git: true
    #   has_readme: true
    []
    
  # Project structure overview
  project:
    key_directories:
      # - kernel/
      # - skills/
      # - examples/
      []
    key_files:
      # - README.md
      # - PROTOCOLS.yml
      []
    moollm_detected: false
    
  # Context information (what's visible in this session)
  context:
    recently_viewed_files:
      []
    currently_open_files:
      []
    attached_files:
      []
      
# Deep probe section — only present after DEEP-PROBE
# Requires terminal access
deep:
  timestamp: null  # Set when deep probe runs
  
  system:
    os: null           # uname -s
    os_version: null   # uname -r  
    architecture: null # uname -m
    hostname: null     # hostname
    username: null     # whoami
    cwd: null          # pwd
    shell: null        # echo $SHELL
    
  tools_installed:
    python: null       # which python3
    node: null         # which node
    git: null          # which git
    npm: null          # which npm
    
  git:
    is_repo: false
    branch: null       # git branch --show-current
    remotes: {}        # git remote -v (parsed)
    status: null       # clean | dirty
    last_commit: null  # git log -1 --oneline
    
  resources:
    disk_available: null  # df -h . (available column)

# Cursor-specific probe section — only present after CURSOR-PROBE
# Requires terminal and cursor-mirror skill
# Generated by: cursor_mirror.py
cursor:
  timestamp: null  # Set when cursor probe runs
  
  # Overall status (from cursor-mirror status)
  status:
    total_composers: null
    total_messages: null
    total_workspaces: null
    global_db_size_mb: null
    
  # Server configuration (from cursor-mirror status-config)
  config:
    fullContextTokenLimit: null      # e.g., 30000
    maxRuleLength: null              # e.g., 100000
    maxMcpTools: null                # e.g., 100
    absoluteMaxNumberFiles: null     # e.g., 250000
    maxBackgroundComposers: null     # e.g., 10
    indexingPeriodSeconds: null      # e.g., 272
    
  # MCP servers (from cursor-mirror status-mcp)
  mcp_servers:
    # - name: "cursor-ide-browser"
    #   type: "builtin"
    #   tools: ["browser_navigate", "browser_click", ...]
    []
    
  # Available models (from cursor-mirror status-models)
  models:
    # - name: "claude-sonnet-4-20250514"
    #   provider: "anthropic"
    []
    
  # Feature flags (from cursor-mirror status-features)
  features:
    # Key feature flags affecting behavior
    []
    
  # Indexing status for current workspace (from cursor-mirror indexing)
  indexing:
    workspace: null
    embeddable_files_count: null
    important_paths: []
    
  # Recent sessions (from cursor-mirror list-composers --limit 5)
  recent_sessions:
    # - id: "uuid..."
    #   name: "Session name"
    #   messages: 42
    #   last_updated: "2025-01-14T..."
    []
    
  # Data store locations (for reference)
  data_stores:
    global_db: "~/Library/Application Support/Cursor/User/globalStorage/state.vscdb"
    workspace_db: "~/Library/Application Support/Cursor/User/workspaceStorage/<hash>/state.vscdb"
    retrieval: "~/Library/Application Support/Cursor/User/workspaceStorage/<hash>/anysphere.cursor-retrieval/"
    
  # Introspection commands available
  commands:
    status: "cursor-mirror status"
    analyze: "cursor-mirror analyze @1"
    thinking: "cursor-mirror thinking @1"
    context: "cursor-mirror context-sources @1"
    tools: "cursor-mirror tools @1 -v"
    tree: "cursor-mirror tree"
    
  # Driver optimization hints (compare with kernel/drivers/cursor.yml)
  driver_hints:
    note: "Compare these values with kernel/drivers/cursor.yml and update if different"
    tool_names_observed: []    # Actual tool names seen (may differ from driver)
    limits_observed: {}        # Actual limits from status-config

# Privacy notes
# 
# This file may contain:
# - Your hostname
# - Your username  
# - Directory paths on your machine
# - Git remote URLs
#
# It does NOT contain:
# - Network interfaces or IPs
# - SSH keys or credentials
# - API keys or tokens
# - Environment secrets
# - Home directory contents
# - Browser history
# - Anything creepy
#
# This file is gitignored and stays local.
