# CARD.yml â€” Cursor Mirror
#
# SNIFFABLE INTERFACE â€” see SKILL.md for full documentation
# "You can't think about thinking without thinking about thinking about something."

card:
  id: cursor-mirror
  name: "Cursor Mirror"
  type: [skill, introspection, utility]
  emoji: ðŸ”®
  tier: 2
  tagline: "Watch yourself think."
  
  description: |
    Deep introspection into Cursor IDE's internal data.
    Conversations, tool calls, context assembly, MCP tracing, agent reasoning.
    Powered by `cursor_mirror.py` â€” 59 commands, 7 output formats.

# K-LINES

k-lines:
  activates:
    - CURSOR-MIRROR
    - CURSOR-CHAT
    - WATCH-YOURSELF-THINK
    - FILES-AS-STATE
    - IMAGE-ARCHAEOLOGY
    - DOTCURSOR-DISCOVERY
    - AI-ATTRIBUTION
  related:
    - { ref: bootstrap, relation: "traces boot sequences" }
    - { ref: session-log, relation: "documents sessions" }
    - { ref: summarize, relation: "summarizes conversations" }

# INVOKE WHEN

invoke_when:
  - "Review past Cursor chats"
  - "Analyze MOOLLM boot sequences"
  - "Watch yourself think (meta-cognition)"
  - "Trace context assembly"
  - "Trace MCP tool calls"
  - "Debug agent behavior"
  - "Optimize kernel/cursor driver"
  - "Design custom orchestrators"

# METHODS â€” signatures only, see SKILL.md for details

methods:
  # Navigation
  LIST-WORKSPACES: { signature: "list-workspaces [--sort size|date|name]" }
  LIST-COMPOSERS:  { signature: "list-composers [workspace]" }
  TREE:            { signature: "tree [path]", note: "w1, w3.c2, w3.c2.tools" }
  FIND:            { signature: "find <pattern>" }
  WHICH:           { signature: "which <ref>" }
  
  # Viewing
  TAIL:       { signature: "tail [-n N] [--all]" }
  STREAM:     { signature: "stream [--since TIME]" }
  TRANSCRIPT: { signature: "transcript <ref> [--thinking]" }
  WATCH:      { signature: "watch <ref> [--speed N]" }
  
  # Analysis
  ANALYZE:  { signature: "analyze <ref>", note: "boot sequence stats" }
  TIMELINE: { signature: "timeline <ref>" }
  THINKING: { signature: "thinking <ref>", note: "reasoning blocks" }
  GREP:     { signature: "grep <pattern> [-i]" }
  
  # Tools
  TOOLS:       { signature: "tools <ref> [-v]" }
  TOOL-RESULT: { signature: "tool-result <blob_hash>" }
  BLOBS:       { signature: "blobs [--show HASH]" }
  CHECKPOINTS: { signature: "checkpoints <ref>" }
  DIFF:        { signature: "diff <ref> [--from N] [--to N]" }
  MCP:         { signature: "mcp [--servers] [--all]" }
  
  # Context
  CONTEXT:         { signature: "context <ref>" }
  CONTEXT-SOURCES: { signature: "context-sources <ref>", note: "all sources" }
  REQUEST-CONTEXT: { signature: "request-context <ref>" }
  SEARCHES:        { signature: "searches <ref> [-v]" }
  INDEXING:        { signature: "indexing [workspace]" }
  
  # Status
  STATUS:          { signature: "status", note: "dashboard" }
  STATUS-CONFIG:   { signature: "status-config", note: "server limits" }
  STATUS-MCP:      { signature: "status-mcp" }
  STATUS-MODELS:   { signature: "status-models" }
  STATUS-FEATURES: { signature: "status-features" }
  STATUS-PRIVACY:  { signature: "status-privacy" }
  
  # Files
  FILES: { signature: "files <ref>" }
  TODOS: { signature: "todos <ref>" }
  
  # Images
  IMAGES:        { signature: "images [--all]" }
  IMAGE-PATH:    { signature: "image-path <ref>" }
  IMAGE-INFO:    { signature: "image-info <ref>" }
  IMAGE-GALLERY: { signature: "image-gallery [-o FILE]" }
  
  # Export
  EXPORT-CHAT:     { signature: "export-chat <ref> [--yaml]" }
  EXPORT-MARKDOWN: { signature: "export-markdown <ref>" }
  EXPORT-JSONL:    { signature: "export-jsonl <ref>" }
  EXPORT-PROMPTS:  { signature: "export-prompts <workspace>" }
  MODELS:          { signature: "models" }
  STATS:           { signature: "stats" }
  INDEX:           { signature: "index [-o DIR]" }
  
  # Database
  SQL:    { signature: 'sql --db <ref> "SELECT ..."' }
  DBS:    { signature: "dbs" }
  TABLES: { signature: "tables --db <ref>" }
  KEYS:   { signature: "keys [--pattern PATTERN]" }
  
  # ~/.cursor
  DOTCURSOR-STATUS:    { signature: "dotcursor-status" }
  AI-HASHES:           { signature: "ai-hashes [--since TIME]" }
  AI-COMMITS:          { signature: "ai-commits [--since TIME]" }
  AGENT-TRANSCRIPT:    { signature: "agent-transcript <composer>" }
  AGENT-TOOLS:         { signature: "agent-tools [--workspace WS]" }
  DOTCURSOR-TERMINALS: { signature: "dotcursor-terminals" }
  MCP-TOOLS:           { signature: "mcp-tools [--server NAME]" }
  EXTENSIONS:          { signature: "extensions" }

# ADVERTISEMENTS

advertisements:
  WATCH-YOURSELF-THINK:
    score: 100
    condition: "Meta-cognition, review reasoning, self-awareness"
    
  ANALYZE-BOOT:
    score: 100
    condition: "Analyzing MOOLLM boot sequence or agent behavior"
    
  TRACE-CONTEXT:
    score: 95
    condition: "Understanding how Cursor assembles context"
    
  STATUS-CHECK:
    score: 95
    condition: "Checking Cursor health, configuration, or limits"
    
  NAVIGATE-HISTORY:
    score: 95
    condition: "Navigating workspaces and composers hierarchically"
    
  TRACE-MCP:
    score: 90
    condition: "Tracing MCP tool calls or server usage"
    
  DOTCURSOR-EXPLORE:
    score: 90
    condition: "Exploring ~/.cursor, AI tracking, transcripts"
    
  IMAGE-ARCHAEOLOGY:
    score: 85
    condition: "Finding cached images, screenshots, galleries"
    
  EXPORT-DOCS:
    score: 80
    condition: "Documenting conversations, creating session logs"
    
  SQL-QUERY:
    score: 85
    condition: "Querying Cursor databases directly"

# SISTER SCRIPT

script:
  name: cursor_mirror.py
  language: python3
  lines: ~9800
  commands: 59
  output_formats: [text, json, jsonl, yaml, csv, md]

# FAMILIAR

familiar:
  name: "Cursor"
  emoji: "ðŸ”®"
  file: I-BEAM-CHARACTER.yml
  invocation: ["Cursor, [question]", "ðŸ”® [question]"]

# TOOLS

tools:
  required: [read_file, terminal]
  optional: [grep, glob]

# DOCUMENTATION POINTERS

documentation:
  SKILL.md:
    - "Â§ Quick Start â€” essential commands"
    - "Â§ Reference Shortcuts â€” @1, w3.c2, name fragments"
    - "Â§ Command Categories â€” organized by function"
    - "Â§ Optimizing the Kernel/Cursor Driver"
    - "Â§ Data Sources â€” database paths and keys"
    - "Â§ Integration Points â€” bootstrap, working-set"
  files:
    - DATA-SCHEMAS.yml      # state.vscdb JSON schemas
    - DOTCURSOR-SCHEMAS.yml # ~/.cursor data formats
    - KEY-CATALOG.yml       # Complete key inventory
    - MAC-STORAGE.yml       # macOS paths
    - I-BEAM-CHARACTER.yml  # Cursor familiar
