# CARD.yml â€” Room
#
# SNIFFABLE INTERFACE â€” see SKILL.md for full documentation
# "A room is a directory with atmosphere."

card:
  id: room
  name: "Room"
  type: [skill, spatial, foundational]
  emoji: ðŸšª
  tier: 1
  tagline: "A room is a directory with atmosphere."
  
  description: |
    The foundational spatial metaphor. Directories ARE rooms.
    Rooms have contents, exits, atmosphere. Cards activate
    when played in rooms. Navigation is movement.

# FILES INDEX â€” Activate together for full context

files:
  docs:
    - SKILL.md              # Full protocol documentation
    - README.md             # Human landing page
    - TOPOLOGY.yml          # Compass rose, navigation patterns
  templates:
    - ROOM.yml.tmpl         # Template for new rooms

# K-LINES

k-lines:
  activates:
    - ROOM
    - SPATIAL
    - NAVIGATION
    - DIRECTORY-AS-ROOM
    - BUILDER-COMMANDS
  related:
    - { ref: adventure, relation: "room-based exploration" }
    - { ref: character, relation: "characters have locations" }
    - { ref: memory-palace, relation: "spatial organization" }

# INVOKE WHEN

invoke_when:
  - "Navigate between locations"
  - "Create new rooms/spaces"
  - "Describe or examine a location"
  - "World-building (@DIG, @OPEN, etc.)"

# METHODS â€” Player Actions

methods:
  LOOK:     { signature: "LOOK (AT [thing])" }
  ENTER:    { signature: "ENTER [room]" }
  EXIT:     { signature: "EXIT [direction]" }
  CONTENTS: { signature: "CONTENTS" }
  ADVERTISE: { signature: "ADVERTISE", note: "show available actions" }

# BUILDER COMMANDS (TinyMUD-style, @-prefixed)

builder_commands:
  DIG:       { usage: "@DIG [name] (DIRECTION)", note: "create room" }
  OPEN:      { usage: "@OPEN [dir] TO [dest]", note: "create exit" }
  LINK:      { usage: "@LINK [exit] TO [dest]" }
  UNLINK:    { usage: "@UNLINK [exit]" }
  DESCRIBE:  { usage: "@DESCRIBE [text]" }
  NAME:      { usage: "@NAME [new-name]" }
  LOCK:      { usage: "@LOCK [exit] = [condition]" }
  UNLOCK:    { usage: "@UNLOCK [exit]" }
  TELEPORT:  { usage: "@TELEPORT [dest]", note: "builder power" }
  SET:       { usage: "@SET [prop]=[value]" }

# WORLD GENERATION (brief â€” see SKILL.md)

world_generation:
  GENERATE:  { usage: "@GENERATE [pattern] [params]", patterns: [maze, dungeon, building, neighborhood, tree] }
  CONNECT:   { usage: "@CONNECT [strategy]" }
  POPULATE:  { usage: "@POPULATE WITH [pattern]" }
  THEME:     { usage: "@THEME AS [theme]" }

# ADVERTISEMENTS

advertisements:
  NAVIGATE:
    score: 90
    condition: "Need to go somewhere"
    
  CREATE-SPACE:
    score: 85
    condition: "Need a new room for content"
    
  BUILD-WORLD:
    score: 85
    condition: "World-building with @DIG, @OPEN, etc."
    
  UNDERSTAND-LOCATION:
    score: 80
    condition: "Confused about where things are"

# ROOM TYPES

types:
  physical:    "Normal navigable space"
  metaphysical: "Conceptual space (characters/, personas/)"
  container:   "Nested room (cat-cave, bag of holding)"
  vehicle:     "Room that can move (TARDIS, Logo turtle)"
  repository:  "Storage space for collections"

# STATE SCHEMA (brief â€” see SKILL.md)

state:
  fields: [id, name, type, description, atmosphere, exits, contents, advertisements]

# ANTI-PATTERNS (brief â€” see SKILL.md)

anti_patterns:
  ascii_maps: "FORBIDDEN â€” fragile, high maintenance, wastes tokens"
  instead: "Use markdown tables | Direction | Destination |"

# TOOLS

tools:
  required: [read_file, write_file, list_dir]
  optional: []

# DOCUMENTATION POINTERS

documentation:
  SKILL.md:
    - "Â§ Builder Commands (@DIG, @OPEN, @LINK, etc.)"
    - "Â§ World Generation Patterns"
    - "Â§ Room Types"
    - "Â§ State Schema"
    - "Â§ Anti-Patterns (ASCII maps)"
  TOPOLOGY.yml: "Compass rose, direction aliases"

# LINEAGE

lineage:
  - { name: "Colossal Cave", year: 1976 }
  - { name: "TinyMUD", year: 1989, note: "@dig, @open, @link" }
  - { name: "LambdaMOO", year: 1990, note: "programmable rooms" }
