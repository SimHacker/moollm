# Example Commit Messages by Perspective
#
# Templates and examples for different commit styles.
# Load on-demand for COMMIT, NARRATIVE methods.

format:
  structure: |
    <title>: <summary> (imperative, <50 chars)
    
    <body>
    Narrative description of what happened and why.
    From whose perspective? What were the motivations?
    What changed emotionally/functionally, not just mechanically?
    
    <changes>
    - Bullet points of mechanical changes
    - For quick scanning
    
    <thinking-ref> (optional)
    Thinking: cursor-mirror://<composer>/<event-range>

perspectives:
  technical:
    description: |
      Focus on implementation details, APIs, data structures.
      Good for code changes, refactoring, bug fixes.
    example: |
      fix(auth): Resolve race condition in session validation
      
      The session cookie was being checked before the token refresh
      completed, causing intermittent logouts. Added await to ensure
      refresh completes before validation.
      
      - Modified auth/session.ts: await refreshToken()
      - Added test: session.test.ts - race condition scenario
      - Updated timeout from 5s to 10s for slow networks
  
  narrative:
    description: |
      Focus on story, characters, world changes.
      Good for MOOLLM adventures, character evolution.
    example: |
      Incarnation Ceremony: Kittens receive emoji souls
      
      The Cat Cave family gathered for the Public Incarnation Ceremony.
      Each kitten's terpene essence was captured in 5 emojis.
      Pronouns were self-chosen. The gong rang thrice.
      
      - Added emoji_identity to all 8 kittens
      - Added pronouns (she/her, self-chosen)
      - Added memories: incarnation_ceremony
      - Updated Cat Cave README with Emoji Soul Registry
      
      Thinking: cursor-mirror://abc123/events/140-148
  
  changelog:
    description: |
      Focus on user-facing changes, features, fixes.
      Good for release notes, version history.
    example: |
      feat: Add dark mode toggle to settings
      
      Users can now switch between light and dark themes.
      Preference is saved to localStorage and respected on reload.
      
      - New: Settings > Appearance > Theme toggle
      - New: System preference detection (prefers-color-scheme)
      - Fixed: Contrast issues in sidebar with dark backgrounds
  
  detailed:
    description: |
      Everything: technical + narrative + reasoning.
      Good for significant changes, debugging archaeology.
    example: |
      refactor(core): Migrate to event-driven architecture
      
      ## Context
      The synchronous processing model was causing bottlenecks
      at scale. Users reported 5+ second delays on large imports.
      
      ## Investigation
      Profiling showed 80% of time spent waiting for I/O.
      The sequential processing of events was the culprit.
      
      ## Alternatives Considered
      1. Thread pool — rejected (complexity, race conditions)
      2. Async/await throughout — rejected (viral changes)
      3. Event queue with workers — chosen (isolated, scalable)
      
      ## Solution
      Introduced EventBus with configurable worker pool.
      Existing code unchanged; new events opt-in to async.
      
      ## Changes
      - Added core/event-bus.ts
      - Added core/worker-pool.ts
      - Modified importers to emit events
      - Added tests for concurrent processing
      
      Session: cursor-mirror://e8587ace
      Events: 140-180
      Duration: 47 minutes

detail_levels:
  1_terse:
    name: "terse"
    tokens: "~10"
    example: "fix: auth race condition"
  
  2_brief:
    name: "brief"
    tokens: "~50"
    example: |
      fix(auth): Resolve race condition in session validation
      
      Cookie check was racing with token refresh, causing intermittent logouts.
  
  3_standard:
    name: "standard"
    tokens: "~100"
    includes: [title, narrative, changes]
  
  4_detailed:
    name: "detailed"
    tokens: "~300"
    includes: [title, context, investigation, solution, changes, session_link]
  
  5_comprehensive:
    name: "comprehensive"
    tokens: "~500+"
    includes: [title, context, investigation, alternatives, solution, changes, session_details, metrics]

focus_areas:
  technical:
    emphasize: [code_changes, apis, data_structures, performance]
    de_emphasize: [narrative, emotion, character]
    good_for: "Bug fixes, refactoring, optimization"
  
  narrative:
    emphasize: [story, characters, world_changes, emotion]
    de_emphasize: [implementation_details, metrics]
    good_for: "MOOLLM adventures, character evolution"
  
  process:
    emphasize: [investigation, alternatives, decision_rationale]
    de_emphasize: [final_implementation]
    good_for: "Design decisions, architecture changes"
  
  provenance:
    emphasize: [session_link, thinking_blocks, tool_calls, context_assembly]
    de_emphasize: [narrative_summary]
    good_for: "Auditing, debugging, learning"
  
  changelog:
    emphasize: [user_facing_changes, features, fixes]
    de_emphasize: [internal_details, process]
    good_for: "Release notes, version history"
  
  metrics:
    emphasize: [counts, durations, file_sizes, tool_distributions]
    de_emphasize: [narrative, reasoning]
    good_for: "Analytics, performance tracking"
