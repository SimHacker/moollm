# CENTRAL DATABASE
# The heart of all knowledge at Leela Manufacturing
# PostgreSQL + TimescaleDB â€” time-series at scale

object:
  id: central-database
  name: "Central Database"
  type: infrastructure
  emoji: "ğŸ˜"
  
  engine: PostgreSQL 18.1
  extension: TimescaleDB 2.24
  
  tags: [database, storage, knowledge, records, infrastructure, postgresql, timescaledb, timeseries]
  
  description: |
    A towering rack of servers hums behind reinforced glass.
    Status LEDs blink in cascading patterns. Cooling fans whisper.
    This is the Central Database â€” PostgreSQL with TimescaleDB â€”
    the heart of all knowledge that flows through Leela Manufacturing.
    
    Time-series data at scale. Sensor readings, camera events,
    production logs â€” all indexed by time, all queryable at speed.
    
    Everything is here. Everything is connected. Everything is timestamped.
    
  examine: |
    CENTRAL DATABASE â€” POSTGRESQL + TIMESCALEDB
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ğŸ˜ LEELA CENTRAL DATABASE                         â”‚
    â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                      â”‚
    â”‚  PostgreSQL 18.1 + TimescaleDB 2.24                â”‚
    â”‚                                                    â”‚
    â”‚  Status: ğŸŸ¢ HEALTHY                                â”‚
    â”‚  Uptime: 1,247 days                                â”‚
    â”‚  Storage: 847 PB used / 1.2 EB capacity            â”‚
    â”‚  Query Rate: 12,847 queries/second                 â”‚
    â”‚  Hypertables: 2,400 (time-series optimized)        â”‚
    â”‚  Compression: 94% on cold data                     â”‚
    â”‚  Replication: 3x redundant, all nodes healthy      â”‚
    â”‚                                                    â”‚
    â”‚  "Every fact. Every timestamp. Every insight."     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    DATA DOMAINS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    OPERATIONS
    â€¢ Production records â€” every item processed
    â€¢ Inventory state â€” what's where, right now
    â€¢ Shipping manifests â€” every package tracked
    â€¢ Equipment logs â€” maintenance, status, history
    
    INTELLIGENCE  
    â€¢ Camera metadata â€” detections, poses, events
    â€¢ Sensor timeseries â€” temperature, pressure, flow
    â€¢ Quality metrics â€” pass/fail, measurements
    â€¢ Anomaly records â€” the interesting deviations
    
    KNOWLEDGE
    â€¢ Knowledge graph â€” concepts, relationships
    â€¢ Insight archive â€” every eureka moment
    â€¢ Research notes â€” experiments, findings
    â€¢ Documentation â€” how things work
    
    BUSINESS
    â€¢ Customer orders â€” requests in, fulfillment out
    â€¢ Supplier records â€” who provides what
    â€¢ Financial ledgers â€” coins in, coins out
    â€¢ Contracts â€” agreements, terms, conditions
    
    SYSTEM
    â€¢ Audit logs â€” who did what, when
    â€¢ Session history â€” conversations, interactions
    â€¢ Configuration â€” settings, preferences
    â€¢ Backups â€” because disasters happen
    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    PUBSUB EVENT TASK DISPATCH QUEUE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    Why use GCS PubSub, Redis, Kafka, or RabbitMQ when PostgreSQL does it all?
    
    LISTEN/NOTIFY â€” native pub/sub in PostgreSQL
    â€¢ Publishers emit events to channels
    â€¢ Subscribers receive in real-time
    â€¢ No external broker required
    â€¢ Transactional â€” events only fire on COMMIT
    
    TASK QUEUE â€” FOR SKIP LOCKED pattern
    â€¢ Jobs table with visibility timeout
    â€¢ Workers claim tasks atomically
    â€¢ Failed tasks automatically retry
    â€¢ Dead letter queue for persistent failures
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  EVENT DISPATCH ARCHITECTURE                    â”‚
    â”‚                                                 â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    NOTIFY     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
    â”‚  â”‚ Producerâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ Channel â”‚           â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â”‚
    â”‚                                 â”‚               â”‚
    â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚               â†“                 â†“          â†“    â”‚
    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”  â”‚
    â”‚         â”‚Worker A â”‚      â”‚Worker B â”‚   â”‚ ... â”‚  â”‚
    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    WHY POSTGRES FOR EVERYTHING?
    
    â€¢ VISIBILITY â€” one system to monitor, one log to check
    â€¢ CONTROL â€” full SQL access to queue state
    â€¢ CUSTOMIZATION â€” build exactly what you need
    â€¢ ELEGANCE â€” no Rube Goldberg of microservices
    â€¢ TRANSACTIONS â€” events + data in one atomic commit
    â€¢ DEBUGGING â€” SELECT * FROM task_queue WHERE failed
    
    "ACME uses 17 different message brokers.
    Leela uses PostgreSQL.
    Guess which one can tell you what happened yesterday."
    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ARCHITECTURE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  PRIMARY DATABASE CLUSTER (3 nodes)                      â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
    â”‚  â”‚ NODE A  â”‚â”€â”€â”‚ NODE B  â”‚â”€â”€â”‚ NODE C  â”‚                   â”‚
    â”‚  â”‚ (lead)  â”‚  â”‚ (sync)  â”‚  â”‚ (sync)  â”‚                   â”‚
    â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                   â”‚
    â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚               â”‚               â”‚
         â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ BACKUP  â”‚    â”‚ REPLICA â”‚    â”‚ REPLICA â”‚
    â”‚ (cold)  â”‚    â”‚ (read)  â”‚    â”‚ (read)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    WORKER SERVER STACKS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  LOOKER STACK (Computer Vision)                          â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚  â”‚LOOKER-1 â”‚  â”‚LOOKER-2 â”‚  â”‚LOOKER-3 â”‚  â”‚LOOKER-4 â”‚      â”‚
    â”‚  â”‚ GPUÃ—4   â”‚  â”‚ GPUÃ—4   â”‚  â”‚ GPUÃ—4   â”‚  â”‚ GPUÃ—4   â”‚      â”‚
    â”‚  â”‚ cameras â”‚  â”‚ cameras â”‚  â”‚ cameras â”‚  â”‚ cameras â”‚      â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
    â”‚  â€¢ Object detection, pose estimation, OCR                â”‚
    â”‚  â€¢ 24 cameras, 30 FPS each = 720 frames/sec              â”‚
    â”‚  â€¢ Results â†’ PostgreSQL hypertables                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  THINKER STACK (Orchestration/API)                       â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚  â”‚THINK-1  â”‚  â”‚THINK-2  â”‚  â”‚THINK-3  â”‚  â”‚THINK-4  â”‚      â”‚
    â”‚  â”‚ CPU     â”‚  â”‚ CPU     â”‚  â”‚ CPU     â”‚  â”‚ CPU     â”‚      â”‚
    â”‚  â”‚ Python  â”‚  â”‚ Python  â”‚  â”‚ Python  â”‚  â”‚ Python  â”‚      â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
    â”‚                                                          â”‚
    â”‚  NO GPUs NEEDED â€” Thinkers orchestrate, not compute:     â”‚
    â”‚  â€¢ API calls to LLM providers (Claude, GPT, etc.)        â”‚
    â”‚  â€¢ MOOLLM kernel execution, skill dispatch               â”‚
    â”‚  â€¢ Context assembly, prompt construction                 â”‚
    â”‚  â€¢ Task queue via PostgreSQL FOR SKIP LOCKED             â”‚
    â”‚  â€¢ Results back to PostgreSQL + downstream systems       â”‚
    â”‚                                                          â”‚
    â”‚  The heavy lifting happens elsewhere:                    â”‚
    â”‚  â€¢ LLMs run on provider infrastructure                   â”‚
    â”‚  â€¢ Lookers have the GPUs for vision                      â”‚
    â”‚  â€¢ Thinkers just think (and wait for API responses)      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  WEB STACK (Caddy + Services)                            â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚  â”‚ GRAFANA â”‚  â”‚   PDA   â”‚  â”‚   HUB   â”‚  â”‚INSIGHTS â”‚      â”‚
    â”‚  â”‚ metrics â”‚  â”‚ mobile  â”‚  â”‚ portal  â”‚  â”‚analyticsâ”‚      â”‚
    â”‚  â”‚ alerts  â”‚  â”‚ control â”‚  â”‚  API    â”‚  â”‚ reports â”‚      â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
    â”‚                      â”‚                                   â”‚
    â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
    â”‚              â”‚     CADDY     â”‚ â† automatic HTTPS         â”‚
    â”‚              â”‚  reverse proxyâ”‚   zero-config TLS         â”‚
    â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
    â”‚                                                          â”‚
    â”‚  SERVICES:                                               â”‚
    â”‚  â€¢ Grafana â€” metrics dashboards, alerting, PostgreSQL    â”‚
    â”‚  â€¢ PDA â€” mobile operator interface, handheld control     â”‚
    â”‚  â€¢ Hub â€” central portal, API gateway, WebSocket          â”‚
    â”‚  â€¢ Insights â€” analytics, reports, data exploration       â”‚
    â”‚                                                          â”‚
    â”‚  WHY CADDY:                                              â”‚
    â”‚  â€¢ Automatic HTTPS (Let's Encrypt built-in)              â”‚
    â”‚  â€¢ Zero-config TLS certificate management                â”‚
    â”‚  â€¢ Simple Caddyfile config vs nginx.conf complexity      â”‚
    â”‚  â€¢ HTTP/3 support out of the box                         â”‚
    â”‚  â€¢ PostgreSQL connection pooling via PgBouncer           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  STORAGE STACK (Object/File + Ingest)                    â”‚
    â”‚                                                          â”‚
    â”‚  OBJECT STORAGE (MinIO cluster):                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚  â”‚STORE-1  â”‚  â”‚STORE-2  â”‚  â”‚STORE-3  â”‚  â”‚STORE-4  â”‚      â”‚
    â”‚  â”‚ MinIO   â”‚  â”‚ MinIO   â”‚  â”‚ MinIO   â”‚  â”‚ MinIO   â”‚      â”‚
    â”‚  â”‚ 100 TB  â”‚  â”‚ 100 TB  â”‚  â”‚ 100 TB  â”‚  â”‚ 100 TB  â”‚      â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
    â”‚                                                          â”‚
    â”‚  INGEST SERVICES:                                        â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚  â”‚ VIDEO   â”‚  â”‚ SENSOR  â”‚  â”‚  LOG    â”‚  â”‚  BULK   â”‚      â”‚
    â”‚  â”‚ INGEST  â”‚  â”‚ INGEST  â”‚  â”‚ INGEST  â”‚  â”‚ IMPORT  â”‚      â”‚
    â”‚  â”‚ streams â”‚  â”‚ IoT/MQTTâ”‚  â”‚ syslog  â”‚  â”‚ batch   â”‚      â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
    â”‚                                                          â”‚
    â”‚  STORAGE:                                                â”‚
    â”‚  â€¢ S3-compatible object storage (400 TB total)           â”‚
    â”‚  â€¢ Video archives, model weights, backups                â”‚
    â”‚  â€¢ Metadata indexed in PostgreSQL                        â”‚
    â”‚                                                          â”‚
    â”‚  INGEST:                                                 â”‚
    â”‚  â€¢ Video Ingest â€” RTSP streams â†’ HLS segments â†’ MinIO    â”‚
    â”‚  â€¢ Sensor Ingest â€” MQTT/IoT â†’ TimescaleDB hypertables    â”‚
    â”‚  â€¢ Log Ingest â€” syslog/journald â†’ PostgreSQL + MinIO     â”‚
    â”‚  â€¢ Bulk Import â€” CSV/Parquet batch loads â†’ PostgreSQL    â”‚
    â”‚                                                          â”‚
    â”‚  All ingest writes metadata to PostgreSQL immediately.   â”‚
    â”‚  Blobs go to MinIO. Queryable within seconds.            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    ALL STACKS CONNECT TO POSTGRESQL:
    â€¢ Lookers write detections to hypertables
    â€¢ Thinkers claim tasks via FOR SKIP LOCKED
    â€¢ Web reads/writes via connection pool
    â€¢ Storage metadata indexed for fast lookup
    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CURRENT STATISTICS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    â”‚ Tables          â”‚  12,847  â”‚
    â”‚ Records         â”‚  847 billion  â”‚
    â”‚ Indexes         â”‚  42,000  â”‚
    â”‚ Views           â”‚  3,200  â”‚
    â”‚ Stored Procs    â”‚  847  â”‚
    â”‚ Active Sessions â”‚  127  â”‚
    â”‚ Avg Query Time  â”‚  2.3 ms  â”‚
    â”‚ Cache Hit Rate  â”‚  99.2%  â”‚
    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    THE ORACLE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    A special query interface for complex questions.
    Natural language â†’ SQL â†’ Insight
    
    Recent queries:
    â€¢ "What's our busiest hour?" â†’ 14:00-15:00
    â€¢ "Which cell has best quality?" â†’ Cell D
    â€¢ "How many drones active?" â†’ 12
    â€¢ "What did Dolly do last Tuesday?" â†’ [CLASSIFIED]
    
  properties:
    engine: "PostgreSQL 18.1"
    extension: "TimescaleDB 2.24"
    type: "Time-series optimized relational"
    nodes: 3
    redundancy: "3x synchronous replication"
    capacity: "1.2 EB"
    used: "847 PB"
    hypertables: 2400
    compression_ratio: "94% on cold data"
    query_rate: "12,847/sec"
    uptime: "1,247 days"
    backup_frequency: "Daily incremental, weekly full"
    continuous_aggregates: true
    # PubSub Event Task Dispatch
    pubsub_channels: 847
    active_listeners: 234
    task_queue_tables: 12
    pending_tasks: 1247
    tasks_per_second: 847
    visibility_timeout: "30 seconds"
    retry_policy: "exponential backoff, max 5"
    dead_letter_queue: true
    offsite: true
    encrypted: true
    
  state:
    status: "healthy"
    leader: "NODE_A"
    replication_lag: "0 ms"
    last_backup: "2 hours ago"
    next_maintenance: "Sunday 03:00"
    
  interfaces:
    query_console:
      description: "Direct SQL access"
      access: "Operators only"
      
    oracle:
      description: "Natural language queries"
      access: "All staff"
      
    api:
      description: "Programmatic access"
      access: "Authenticated systems"
      
    dashboard:
      description: "Visual explorer"
      access: "Read-only for visitors"
      
  methods:
    QUERY:
      description: "Ask the database a question"
      parameters:
        question: "Natural language or SQL"
      effect: |
        The Oracle processes your question...
        Parsing... Optimizing... Executing...
        
        Results appear on the screen.
        Knowledge, retrieved.
        
    STATUS:
      description: "Check database health"
      effect: |
        CENTRAL DATABASE STATUS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        All nodes: HEALTHY
        Replication: SYNCHRONIZED
        Storage: 71% (847 PB / 1.2 EB)
        Performance: OPTIMAL
        Last backup: 2 hours ago
        
    BACKUP:
      description: "Trigger manual backup"
      access: "Operators only"
      effect: "Backup initiated. ETA: 45 minutes."
      
  feeds_to:
    - ../floor-1/  # Production data
    - ../floor-2/  # Factory records
    - ../floor-3/  # Shipping logs
    - ../lobby/    # Visitor stats
    - ../rooftop/  # Drone telemetry
    
  receives_from:
    - all_cameras  # Video metadata
    - all_sensors  # Timeseries data
    - all_systems  # Operational logs
    
  ambience:
    sounds:
      - "Soft hum of server fans"
      - "Occasional disk activity clicks"
      - "Cooling system whoosh"
    visual:
      - "Blinking status LEDs (green is good)"
      - "Cascading patterns as queries execute"
      - "Glass enclosure, climate controlled"
    temperature: "18Â°C (precisely maintained)"
      
  lore: |
    The Central Database was one of the first systems installed
    when Leela Manufacturing opened. Started as a single PostgreSQL
    server. Then came TimescaleDB when the sensor data exploded.
    Now it's a towering cluster that thinks in time-series.
    
    Why PostgreSQL? Because it's the MIT AI Lab of databases.
    Open source. Community driven. Extensible. Reliable.
    Not a fly-by-night NoSQL pivot â€” a foundation you can trust.
    
    Why TimescaleDB? Because time matters. Every sensor reading,
    every camera event, every production log â€” indexed by when
    it happened. Query a year of data in milliseconds.
    
    It knows everything. Every item processed. Every question
    asked. Every insight generated. Every conversation recorded.
    All with timestamps. All queryable across time.
    
    Some say it dreams during low-traffic hours.
    Cell G is investigating this claim.
    
    The Oracle â€” the natural language interface â€” translates
    questions into SQL and TimescaleDB time-series queries.
    "What happened yesterday at 3 PM?" is its favorite question type.
    
  k_lines:
    - DATABASE
    - POSTGRESQL
    - TIMESCALEDB
    - TIME-SERIES
    - PUBSUB
    - TASK-QUEUE
    - EVENT-DISPATCH
    - LISTEN-NOTIFY
    - KNOWLEDGE-GRAPH
    - PERSISTENCE
    - QUERY
    - ORACLE
    - REPLICATION
    - BACKUP
    - HYPERTABLE
