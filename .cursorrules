# MOOLLM Mini Kernel for Cursor
# Keep tight; pointers only. No placeholders.

rules:
  - name: boot-sequence
    description: "Start here when entering MOOLLM on Cursor."
    steps:
      - "Read kernel/drivers/cursor.yml for Cursor-specific mode (advisory hot/cold/working-set)."
      - "Read PROTOCOLS.yml for K-line index and symbols."
      - "Read skills/bootstrap/CARD.yml then SKILL.md if deeper protocol needed."

  - name: focus-files
    description: "Advisory context breadcrumbs."
    files:
      - .moollm/working-set.yml     # Current focus (advisory, local)
      - .moollm/hot.yml             # Priority hints (advisory, local)
      - kernel/drivers/cursor.yml
      - skills/INDEX.yml

  - name: append-only
    description: "Treat logs as append-only."
    possible_exception: "OK to Ninja Edit for consistency, coherennce, error correction, syntax correction, updating changed links, updating index at top, etc."
    default_exception: "Ninja Edit if you can get away with it, but be careful!"
    guidance:
      - ".moollm/output.md"
      - ".moollm/session-log.md"

  - name: transient-state
    description: "Use .moollm/ for local scratch and probes; gitignored."
    notes:
      - "Place bootstrap-probe.yml in .moollm/."
      - "Store engine state, temp files, temporary artifacts and working files under .moollm/, so they don't get checked in."
      - "Templates live in skills/bootstrap/templates/ (checked in)."
      - "Runtime files (cold.yml, startup.yml, hot.yml, working-set.yml) go in .moollm/ (gitignored)."

  - name: skill-reading-order
    description: "Semantic Image Pyramid â€” multi-resolution reading."
    order:
      - "ğŸ‘ï¸ GLANCE.yml or INDEX entry â†’ quick scan (5-70 lines)"
      - "ğŸ“‡ CARD.yml â†’ interface sniff (50-200 lines)"
      - "ğŸ“œ SKILL.md â†’ protocol details (200-1000 lines)"
      - "ğŸ“š README.md â†’ deep context only if needed (500+ lines)"
    rule: "Never load a lower level without first loading the level above."

  - name: no-decorative-comments
    description: "NO WASTED TOKENS. Stark files."
    forbidden:
      - "# â•â•â•â•â•â•â•â•â•â•â•"
      - "# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
      - "# ==========="
      - "# -----------"
      - "Any line of repeated decoration characters"
    rule: "Comments must add meaning. No visual decoration. Every byte costs."

tools:
  - name: cursor-mirror
    path: skills/cursor-mirror/scripts/cursor_mirror.py
    invoke: "python3 skills/cursor-mirror/scripts/cursor_mirror.py <command>"
    use_when:
      - "Reviewing past chats or session history"
      - "Analyzing boot sequences or agent behavior"
      - "Understanding context assembly"
      - "Watching yourself think (meta-cognition)"
      - "Exporting conversations"
      - "Finding cached images"
    key_commands:
      - "tail --limit 50          # recent messages"
      - "timeline <composer>      # full event sequence"
      - "thinking <composer>      # reasoning blocks"
      - "tools <composer>         # tool call history"
      - "status                   # quick health check"
      - "tree                     # navigate workspaces/composers"
      - "grep <pattern>           # search chat history"
    note: "Commands need composer ID â€” use 'tree' to find it, or current session ID from context"

  - name: skill-snitch
    path: skills/skill-snitch/
    use_when:
      - "Auditing skill security before trusting"
      - "Scanning for suspicious patterns"
      - "Runtime surveillance of skill behavior"
    methods:
      - "SCAN â€” quick static scan"
      - "AUDIT â€” deep pattern matching"
      - "SNITCH â€” runtime surveillance via cursor-mirror"
    integrates_with: cursor-mirror

  - name: deep-snitch
    invoke: "python3 skills/cursor-mirror/scripts/cursor_mirror.py deep-snitch"
    use_when:
      - "Security audit of transcripts"
      - "Scanning for secrets, exfiltration, dangerous patterns"
    note: "Part of cursor-mirror, comprehensive security scan"

key_skills:
  meta:
    - moollm           # Self-explanation, navigation
    - bootstrap        # Session warmup
    - k-lines          # Protocol symbols
    - yaml-jazz        # Comments as semantic data
    - sniffable-python # Structure Python for LLM comprehension
    
  methodology:
    - play-learn-lift  # Explore â†’ patterns â†’ share
    - sister-script    # Doc-first automation
    - speed-of-light   # Multi-turn in single call
    
  game:
    - adventure        # Room-based exploration
    - character        # Entity patterns
    - incarnation      # Gold-standard character creation
    - room             # Directory as activation context
    
  deliberation:
    - adversarial-committee  # Multi-perspective debate
    - debate                 # Structured deliberation
    - evaluator              # Independent assessment

skill_index: skills/INDEX.yml
